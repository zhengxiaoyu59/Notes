## 性能测试要有指标
* 时间指标  
* 容量指标  
* 资源利用率指标  


## 性能测试要有模型
模型是对真实场景的抽象  
e.g.100个业务，并非每个业务都需要并发量，那就需要把有并发的业务统计出来，做压力测试时要控制比例  
* 在线上不敢压测，那需要的数据通常都是从生产环境的数据统计而来  
* 有些企业直接在线上导流做性能测试（并非不需要模型，而是模型已经从生产流量中导过来了）  
* 线上交易不能出错的行业，仍需要在测试环境中用业务模型来模拟出生产的流量  

性能测试要选择适合自己系统业务逻辑的方式


## 性能测试要有方案
方案规定内容中的几个关键点：  
* 测试环境
* 测试数据
* 测试模型
* 性能指标
* 压力策略
* 准入准出
* 进度风险  
以上内容基本足够，信息需要精准  

建议用项目管理工具单独画测试计划：可以细分条目，跟踪各个工作的动态进度，设置前后依赖关系，填入资源和成本以便计算项目偏差


## 性能测试要有监控
需要什么监控什么，不追求新潮  
要有分层、分段的能力：某一个监控工具能看到哪些点，对整体架构来说是否监控到全局  
首先要有全局监控，发现问题后，做定向监控  


## 性能测试要有预定的条件
* 软硬件环境
* 测试数据
* 测试执行策略
* 压力补偿
等  

在场景执行前，这些预定条件应该是确定的  
压力中会有动态扩展，动态扩展的条件或者判断条件都有确定的策略  
e.g.判断CPU使用率达到80%或I/O响应时间达到10ms时，就做动态扩展  


## 性能测试要有场景
在既定的环境（包括动态扩展等策略）、既定的数据（包括场景执行中的数据变化）、既定的执行策略、既定的监控之下，执行性能脚本，同时观察系统各层级的性能状态、参数变化，并实时判断分析场景是否符合预期  
1. 基准性能场景：单交易的容量，为混合容量做准备
2. 容量性能场景：最核心，根据业务复杂度不同，这部分场景会设计出多个
3. 稳定性性能场景：最核心元素是时间，时间的设置来源于运维周期，运维周期内有多少业务量产生，需要囊括这些流量
4. 异常性能场景：前提是要有压力，在压力流量之下，模拟异常  

场景和测试用例的内容有较大偏差：把用例限定在了描述测试脚本和测试数据上，没有描述需要实时的判断和动态的分析，严重影响了性能结果  


## 性能测试要有分析调优
性能项目分类：  
1. 新系统性能测试：一般要求测出系统的最大容量
2. 旧系统新版本性能测试：与旧版本对比，性能不下降即可，对调优要求不高
3. 新系统性能测试优化：不仅要测出最大容量，还要求调优到最好  

性能团队的职责定位：
1. 性能验证：针对给定指标，只做性能验证
2. 性能测试：针对给定系统，做全面性能测试，可以得到系统最大容量，但不调优（不仅做前端脚本验证，还做后端系统监控，比如资源使用率）
3. 性能测试+分析调优：针对给定系统，做全面性能测试，并调优到最优状态


## 性能测试要有结果报告
体现性能团队是否专业的一个重要方面  
测试报告需要汇报或者归档  

报告需要体现测试结果，比如调优前后的TPS、响应时间及资源对比图，能否支撑业务上线，而不是用了多少人、花了多少时间这些没有意义的数字  


## 总结
性能测试的概念关键词，也是方法和流程：性能指标、性能模型、性能场景、性能监控、性能实施、性能报告  
